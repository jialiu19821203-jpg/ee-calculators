<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Precision LED Resistor Calculator | EE Toolkit</title>
    <meta name="description" content="Professional LED series resistor calculator. Calculates resistance and power dissipation based on Source Voltage, LED Forward Voltage, and Current. Includes E24 standard value recommendations.">
    <meta name="keywords" content="LED resistor calculator, current limiting resistor, LED circuit, ohm's law, power dissipation, E24 resistor values, electronics tool">
    <style>
        /* CSS ‰øùÊåÅ 100% ‰∏é op-amp/voltage-divider ‰∏ÄËá¥ */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { font-family: 'Arial', sans-serif; background: #0f172a; color: #e2e8f0; min-height: 100vh; padding: 2rem; line-height: 1.6; }
        .container { max-width: 1400px; margin: 0 auto; }
        
        /* Navigation Styles */
        .nav-bar { display: flex; justify-content: center; gap: 2rem; padding-bottom: 2rem; margin-bottom: 2rem; border-bottom: 1px solid #334155; }
        .nav-link { color: #94a3b8; text-decoration: none; font-weight: 500; transition: all 0.2s; }
        .nav-link:hover { color: #38bdf8; }
        .nav-link.active { color: #38bdf8; font-weight: 700; border-bottom: 2px solid #38bdf8; }

        .header { text-align: center; margin-bottom: 3rem; padding-bottom: 2rem; border-bottom: 2px solid #1e293b; }
        .header h1 { font-size: 2.25rem; color: #ffffff; margin-bottom: 0.5rem; font-weight: 700; letter-spacing: -0.5px; }
        .header p { color: #94a3b8; font-size: 1.1rem; }
        
        .grid-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; align-items: start; }
        @media (max-width: 1024px) { .grid-layout { grid-template-columns: 1fr; gap: 2.5rem; } }
        
        .panel { background: #1e293b; border-radius: 12px; padding: 2rem; border: 1px solid #334155; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3); }
        .panel-title { font-size: 1.5rem; color: #ffffff; margin-bottom: 1.5rem; font-weight: 600; padding-bottom: 1rem; border-bottom: 2px solid #334155; }
        
        .schematic-container { background: #0f172a; border-radius: 8px; padding: 2rem; display: flex; justify-content: center; align-items: center; border: 1px solid #334155; min-height: 400px; }
        
        .formula-box { background: #0f172a; border-radius: 8px; padding: 1.75rem; margin-bottom: 2rem; border: 2px solid #334155; border-left: 4px solid #38bdf8; }
        .formula-label { font-size: 0.75rem; color: #64748b; text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 1rem; font-weight: 600; }
        .formula { font-size: 1.75rem; color: #38bdf8; font-weight: 700; font-family: 'Arial', sans-serif; text-align: center; }
        
        .theory-section { background: #0f172a; border-radius: 8px; padding: 1.75rem; margin-top: 2rem; border: 1px solid #334155; }
        .theory-title { font-size: 1.1rem; color: #ffffff; margin-bottom: 1rem; font-weight: 600; padding-bottom: 0.75rem; border-bottom: 1px solid #334155; }
        .theory-content { color: #cbd5e1; font-size: 0.95rem; line-height: 1.8; }
        .theory-content p { margin-bottom: 1rem; }
        .theory-content p:last-child { margin-bottom: 0; }
        
        .form-group { margin-bottom: 1.75rem; }
        .form-group label { display: block; font-size: 0.95rem; color: #cbd5e1; margin-bottom: 0.75rem; font-weight: 500; }
        .form-group input { width: 100%; background: #0f172a; border: 2px solid #334155; border-radius: 6px; padding: 0.875rem 1rem; color: #ffffff; font-size: 1rem; font-family: 'Arial', sans-serif; transition: all 0.2s ease; }
        .form-group input:focus { outline: none; border-color: #38bdf8; box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.1); }
        .form-group input:disabled { background: #1e293b; border-color: #334155; color: #64748b; cursor: not-allowed; }
        .form-group input::placeholder { color: #475569; }
        .unit-hint { font-size: 0.8rem; color: #64748b; margin-top: 0.5rem; font-style: italic; }
        
        .btn-calculate { width: 100%; background: #38bdf8; color: #0f172a; border: none; border-radius: 6px; padding: 1rem; font-size: 1.05rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; font-family: 'Arial', sans-serif; margin-top: 0.5rem; text-transform: uppercase; letter-spacing: 0.5px; }
        .btn-calculate:hover { background: #0ea5e9; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(56, 189, 248, 0.3); }
        .btn-calculate:active { transform: translateY(0); }
        
        .result-container { margin-top: 2rem; padding-top: 2rem; border-top: 2px solid #334155; }
        .result-label { font-size: 0.75rem; color: #64748b; text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 1rem; font-weight: 600; }
        .result-box { background: #0f172a; border-radius: 8px; padding: 1.75rem; border: 2px solid #334155; border-left: 4px solid #10b981; display: none; }
        .result-box.active { display: block; }
        .result-value { font-size: 1.75rem; color: #10b981; font-weight: 700; margin-bottom: 0.75rem; font-family: 'Arial', sans-serif; }
        .result-detail { font-size: 0.95rem; color: #94a3b8; }
        
        .error-box { background: #7f1d1d; border: 2px solid #991b1b; border-radius: 6px; padding: 1rem; color: #fca5a5; font-size: 0.9rem; margin-top: 1rem; display: none; }
        .error-box.active { display: block; }
        
        .detailed-theory { background: #1e293b; border-radius: 12px; padding: 2.5rem; margin-top: 3rem; border: 1px solid #334155; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3); }
        .detailed-theory-title { font-size: 1.75rem; color: #ffffff; margin-bottom: 1.5rem; font-weight: 600; padding-bottom: 1rem; border-bottom: 2px solid #334155; }
        .theory-subsection { margin-bottom: 2.5rem; }
        .theory-subsection:last-child { margin-bottom: 0; }
        .subsection-title { font-size: 1.25rem; color: #38bdf8; margin-bottom: 1rem; font-weight: 600; }
        .latex-formula { background: #0f172a; border-radius: 8px; padding: 1.5rem; margin: 1rem 0; border: 2px solid #334155; text-align: center; font-size: 1.5rem; color: #38bdf8; font-family: 'Arial', sans-serif; font-weight: 700; }
        .theory-text { color: #cbd5e1; font-size: 1rem; line-height: 1.8; margin-bottom: 1rem; }
        .theory-text ul { margin-left: 1.5rem; margin-top: 0.5rem; }
        .theory-text li { margin-bottom: 0.75rem; }
        .theory-text strong { color: #ffffff; }
        
        .limitations-box { background: #3d2616; border: 1px solid #d97706; padding: 1.5rem; border-radius: 8px; margin-top: 2rem; }
        .limitations-box h4 { color: #fbbf24; margin-bottom: 0.5rem; font-size: 1.1rem; display: flex; align-items: center; gap: 8px; }
        
        .ad-placeholder { background: #1e293b; border: 2px dashed #475569; border-radius: 8px; padding: 3rem 2rem; margin: 3rem 0; text-align: center; min-height: 200px; display: flex; align-items: center; justify-content: center; }
        .ad-placeholder-text { color: #64748b; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 500; }
        .footer { margin-top: 4rem; padding-top: 2rem; border-top: 2px solid #1e293b; text-align: center; color: #64748b; font-size: 0.9rem; }
    </style>
</head>
<body>
    <div class="container">
        <nav class="nav-bar">
            <a href="index.html" class="nav-link">üè† Home</a>
            <a href="op-amp-calc.html" class="nav-link">Op-Amp</a>
            <a href="voltage-divider.html" class="nav-link">Voltage Divider</a>
            <a href="led-resistor.html" class="nav-link active">LED Resistor</a>
        </nav>

        <header class="header">
            <h1>LED Resistor Calculator</h1>
            <p>Current Limiting & Power Analysis Tool</p>
        </header>
        
        <div class="grid-layout">
            <div class="panel">
                <h2 class="panel-title">Circuit Schematic</h2>
                <div class="schematic-container">
                    <svg viewBox="0 0 400 300" style="width:100%; max-width:400px; background:#1e293b; border-radius:8px; padding:20px;">
                        <circle cx="200" cy="40" r="5" fill="#38bdf8"/>
                        <text x="215" y="45" fill="#38bdf8" font-family="Arial" font-size="16" font-weight="bold">Vin</text>
                        
                        <line x1="200" y1="40" x2="200" y2="80" stroke="#94a3b8" stroke-width="2"/>
                        
                        <rect x="185" y="80" width="30" height="50" fill="#0f172a" stroke="#fbbf24" stroke-width="2"/>
                        <text x="150" y="110" fill="#fbbf24" font-family="Arial" font-size="14">R</text>
                        
                        <line x1="200" y1="130" x2="200" y2="155" stroke="#94a3b8" stroke-width="2"/>
                        
                        <polygon points="185,155 215,155 200,180" fill="none" stroke="#fbbf24" stroke-width="2"/>
                        <line x1="185" y1="180" x2="215" y2="180" stroke="#fbbf24" stroke-width="2"/>
                        
                        <line x1="230" y1="160" x2="250" y2="150" stroke="#38bdf8" stroke-width="2"/>
                        <polyline points="244,150 250,150 250,156" fill="none" stroke="#38bdf8" stroke-width="2"/>
                        <line x1="230" y1="175" x2="250" y2="165" stroke="#38bdf8" stroke-width="2"/>
                        <polyline points="244,165 250,165 250,171" fill="none" stroke="#38bdf8" stroke-width="2"/>
                        
                        <text x="145" y="175" fill="#38bdf8" font-family="Arial" font-size="14">LED</text>
                        
                        <line x1="200" y1="180" x2="200" y2="230" stroke="#94a3b8" stroke-width="2"/>
                        
                        <line x1="180" y1="230" x2="220" y2="230" stroke="#94a3b8" stroke-width="2"/>
                        <line x1="185" y1="235" x2="215" y2="235" stroke="#94a3b8" stroke-width="2"/>
                        <line x1="192" y1="240" x2="208" y2="240" stroke="#94a3b8" stroke-width="2"/>
                    </svg>
                </div>
            </div>
            
            <div class="panel">
                <h2 class="panel-title">Calculator Parameters</h2>
                
                <div class="formula-box">
                    <div class="formula-label">Ohm's Law for LEDs</div>
                    <div class="formula">R = (V<sub>in</sub> - V<sub>f</sub>) / I<sub>f</sub></div>
                </div>
                
                <form id="ledForm" autocomplete="off">
                    <div class="form-group">
                        <label for="vin">Source Voltage V<sub>in</sub> (V)</label>
                        <input type="number" id="vin" step="any" min="0" required placeholder="e.g. 5.0">
                        <div class="unit-hint">Power supply voltage (e.g. 3.3V, 5V, 12V)</div>
                    </div>

                    <div class="form-group">
                        <label for="vf">LED Forward Voltage V<sub>f</sub> (V)</label>
                        <input type="number" id="vf" step="any" min="0" required placeholder="e.g. 2.0">
                        <div class="unit-hint">Red: ~2.0V | Green/Blue: ~3.0V | White: ~3.3V</div>
                    </div>

                    <div class="form-group">
                        <label for="if">LED Forward Current I<sub>f</sub> (mA)</label>
                        <input type="number" id="if" step="any" min="0" required placeholder="e.g. 20">
                        <div class="unit-hint">Standard LED: 20mA | High Power: >100mA</div>
                    </div>
                    
                    <button type="submit" class="btn-calculate">Calculate Resistor</button>
                    <div class="error-box" id="errorBox"></div>
                </form>
                
                <div class="result-container">
                    <div class="result-label">Calculated Result</div>
                    <div class="result-box" id="resultBox">
                        <div class="result-value" id="resultValue"></div>
                        <div class="result-detail" id="resultDetail"></div>
                    </div>
                </div>
                
                <div class="theory-section">
                    <div class="theory-title">Why do LEDs need resistors?</div>
                    <div class="theory-content">
                        <p>
                            LEDs (Light Emitting Diodes) are non-linear devices with very low internal resistance once they turn on. 
                            Connecting an LED directly to a voltage source higher than its forward voltage (V<sub>f</sub>) will 
                            cause <strong>uncontrolled current</strong> to flow, instantly burning out the LED (and possibly the power supply).
                        </p>
                        <p>
                            A series resistor limits this current to a safe level (usually 20mA for standard indicator LEDs), 
                            ensuring longevity and consistent brightness.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="detailed-theory">
            <h2 class="detailed-theory-title">Engineering Details</h2>
            
            <div class="theory-subsection">
                <h3 class="subsection-title">Power Dissipation (Crucial)</h3>
                <div class="latex-formula">P<sub>resistor</sub> = I<sup>2</sup> √ó R</div>
                <p class="theory-text">
                    Calculating the resistor value is only half the job. You must ensure the resistor can handle the heat. 
                    Standard through-hole resistors are rated for <strong>0.25W (1/4 Watt)</strong>. If your calculated power is close to or 
                    exceeds this, the resistor will overheat and fail. Always choose a power rating at least 2x the calculated dissipation.
                </p>
            </div>
            
            <div class="theory-subsection">
                <h3 class="subsection-title">Standard E24 Resistor Values</h3>
                <p class="theory-text">
                    Calculated resistance values (e.g., 137Œ©) rarely exist in the real world. Engineers use the closest standard "E24 Series" value.
                </p>
                <ul class="theory-text">
                    <li><strong>Nearest Higher Value:</strong> Always round <em>up</em> to the nearest standard value (e.g., 137Œ© &rarr; 150Œ©). Rounding down increases current, which risks damaging the LED.</li>
                    <li><strong>Common 5V Values:</strong> For a generic Red LED (2V, 20mA), calculation gives 150Œ©. 
                        For Blue (3.3V, 20mA), calculation gives 85Œ© &rarr; choose <strong>91Œ© (E24)</strong> or <strong>100Œ© (safer)</strong>.
                    </li>
                    <li><strong>Common 12V Values:</strong> For Red LED, (12V-2V)/0.02A = 500Œ© &rarr; use 510Œ© or 560Œ©.</li>
                </ul>
            </div>

            <div class="limitations-box">
                <h4><span>‚ö†Ô∏è</span> Real-World Engineering Constraints</h4>
                <ul class="theory-text" style="color:#fbbf24; margin-top:0.5rem;">
                    <li><strong>Voltage Headroom:</strong> Source voltage (V<sub>in</sub>) must be greater than the LED forward voltage (V<sub>f</sub>). You cannot drive a 3.3V Blue LED with a 3V battery using a resistor alone.</li>
                    <li><strong>Series LEDs:</strong> This calculator assumes a single LED equivalent. If connecting multiple LEDs in series, manually sum their forward voltages (V<sub>total</sub> = V<sub>f1</sub> + V<sub>f2</sub> + ...) and enter the total as V<sub>f</sub>.</li>
                    <li><strong>Heat Management:</strong> If dropping a large voltage (e.g., 24V to 2V), the resistor will dissipate significant heat. Consider using a PWM driver or DC-DC buck converter instead of a resistor.</li>
                    <li><strong>Parallel LEDs:</strong> Avoid putting LEDs in parallel with a single shared resistor. Slight manufacturing differences cause "current hogging," where one LED takes more current and burns out, causing a chain reaction. Use a separate resistor for each LED.</li>
                </ul>
            </div>
        </div>
        
        <div class="ad-placeholder">
            <div class="ad-placeholder-text">Sponsored Content</div>
        </div>
        
        <footer class="footer">
            &copy; 2026 EE Toolkit - Professional Electronics Calculators
            <br><br>
            <div style="font-size: 0.85rem;">
                <a href="about.html" style="color: #64748b; text-decoration: none; margin: 0 10px; transition: color 0.2s;" onmouseover="this.style.color='#38bdf8'" onmouseout="this.style.color='#64748b'">About Us</a> | 
                <a href="disclaimer.html" style="color: #64748b; text-decoration: none; margin: 0 10px; transition: color 0.2s;" onmouseover="this.style.color='#38bdf8'" onmouseout="this.style.color='#64748b'">Disclaimer</a> | 
                <a href="privacy-policy.html" style="color: #64748b; text-decoration: none; margin: 0 10px; transition: color 0.2s;" onmouseover="this.style.color='#38bdf8'" onmouseout="this.style.color='#64748b'">Privacy Policy</a>
            </div>
        </footer>
    </div>
    
    <script>
        const form = document.getElementById('ledForm');
        const vinInput = document.getElementById('vin');
        const vfInput = document.getElementById('vf');
        const ifInput = document.getElementById('if');
        
        const errorBox = document.getElementById('errorBox');
        const resultBox = document.getElementById('resultBox');
        const resultValue = document.getElementById('resultValue');
        const resultDetail = document.getElementById('resultDetail');

        // E24 Standard Resistor Series
        const e24Values = [1.0, 1.1, 1.2, 1.3, 1.5, 1.6, 1.8, 2.0, 2.2, 2.4, 2.7, 3.0, 3.3, 3.6, 3.9, 4.3, 4.7, 5.1, 5.6, 6.2, 6.8, 7.5, 8.2, 9.1];

        function findNearestE24(exactRes) {
            if (exactRes <= 0) return 0;
            
            const magnitude = Math.pow(10, Math.floor(Math.log10(exactRes)));
            const normalized = exactRes / magnitude;
            
            // Find next E24 >= normalized
            let standard = e24Values.find(v => v >= normalized);
            let result = 0;
            
            if (standard) {
                result = parseFloat((standard * magnitude).toPrecision(6));
            } else {
                result = parseFloat((1.0 * magnitude * 10).toPrecision(6));
            }
            
            return result;
        }

        function calculate() {
            const vin = parseFloat(vinInput.value);
            const vf = parseFloat(vfInput.value);
            const if_ma = parseFloat(ifInput.value); 

            errorBox.classList.remove('active');

            if (isNaN(vin) || isNaN(vf) || isNaN(if_ma)) {
                resultBox.classList.remove('active');
                return; 
            }

            if (vin <= vf) {
                if (vin > 0 && vf > 0) {
                    errorBox.textContent = 'Source voltage must be higher than LED forward voltage.';
                    errorBox.classList.add('active');
                }
                resultBox.classList.remove('active');
                return;
            }
            
            if (if_ma <= 0) {
                errorBox.textContent = 'Current must be greater than 0.';
                errorBox.classList.add('active');
                resultBox.classList.remove('active');
                return;
            }

            // Calculation
            const voltageDrop = vin - vf;
            const currentAmps = if_ma / 1000;
            const resistance = voltageDrop / currentAmps;
            const powerWatt = voltageDrop * currentAmps;
            const powerMw = powerWatt * 1000;

            const safeResistor = findNearestE24(resistance);
            
            let powerRec = "1/8W or 1/4W";
            if (powerWatt > 0.125 && powerWatt <= 0.25) powerRec = "1/2W (0.25W is risky)";
            if (powerWatt > 0.25 && powerWatt <= 0.5) powerRec = "1W";
            if (powerWatt > 0.5) powerRec = "High Power Resistor (>1W)";

            resultValue.textContent = `R = ${resistance.toFixed(1)} Œ©`;
            
            resultDetail.innerHTML = `
                <strong>Recommended Standard Value:</strong> <span style="color:#fbbf24">${safeResistor.toLocaleString()} Œ©</span> (E24)<br>
                <strong>Power Dissipation:</strong> ${powerMw.toFixed(1)} mW<br>
                <span style="font-size:0.9em; color:#a7f3d0">Suggested Wattage: ${powerRec}</span>
            `;
            
            resultBox.classList.add('active');
        }

        form.addEventListener('submit', function(e) {
            e.preventDefault(); 
            calculate();
            if (window.innerWidth < 1024) {
                resultBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        });

        vinInput.addEventListener('input', calculate);
        vfInput.addEventListener('input', calculate);
        ifInput.addEventListener('input', calculate);
    </script>
</body>
</html>